### HTTPS, TLS

#### HTTPS单项认证过程是怎样的? ####

证书的核心组成：公钥密文+公钥签名+签名算法(一般是SHA256)。

1）密文=CA.私钥加密（Server.公钥）；2）签名=签名算法SHA256（公钥）；3）签名算法SHA256

客户端认证服务端身份。服务端将证书下发给客户端，不是直接将公钥给客户端，认证通过后取出证书中的公钥，使用该公钥加密数据与服务端通信。

#### 区别：CA、CA证书、根证书、中间证书、CA认证的证书、自签名证书、X.509证书 ####

CA：是证书认证机构，为其他的企业提供证书认证服务并收取费用。

CA证书：CA机构自己的证书，CA会自己创建一对公私钥，私钥严格保管保证不会泄露，公钥自己给自己签发一个证书，这个证书就是该CA机构签发的所有证书的根，也叫根证书，即CA证书就是根证书。CA证书/根证书是安装在操作系统里面的。

中间证书：CA机构为了保护根证书(如果根证书的私钥泄露了、或出现问题则该CA签发过的证书形成的信任链都有问题，信任链就会崩溃)，不会直接用根证书给终端用户、网站签发证书，而是会用自己的根证书签发一些中间证书，再用这些中间证书给终端用户、网站签发证书。如果某个中间证书出问题废弃掉该中间证书即可，用根证书再重新签发一个。

CA认证的证书：即CA机构使用中间证书给终端用户、网站签发的证书。

X.509：证书格式，是当前证书的国际标准。

#### .key、.csr、.crt、pem含义 ####

key：通常指私钥
CSR：Certificate Signing Request的缩写，即证书签名申请，这不是证书，这是要求CA给证书签名的一种正是申请，该申请包含申请证书的实体的公钥及该实体店某些信息。该数据将成为证书的一部分，CSR始终使用它携带的公钥所对应的私钥进行签名。
CRT：certificate的缩写，即证书
PEM：Privacy Enhanced Mail,打开看文本格式,以"-----BEGIN..."开头, "-----END..."结尾,内容是BASE64编码

#### JDK keystore文件导入的是什么证书？PKCS12 ####

keystore用来存储JVM程序的私钥、公钥、证书，PKCS12是keystore文件格式/规范。

keystore中导入的一般是对方的CA证书/根证书或者是中间证书。

#### 当前系统需要mTLS(mutual TLS，双向身份认证)吗？ ####

不需要，因为用户数据是经过银行公钥加密、自己私钥签名的，需要客户公钥、银行私钥才能进行验签、解密，其他人最多只能获取到客户公钥，是没办法解开用户数据的。当前的安全性足够API调用的场合下用了。

